(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,n){e.exports=n(312)},137:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),i=n.n(o),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var l=n(21),u=n(36),m=n(120),p=(n(137),n(314)),d=n(315),h=n(316),f=n(121),v=n.n(f),g=n(17),b=n(313),y=n(28),E=n.n(y),w=n(22),x=n.n(w),O=n(29),S=n.n(O),k=n(30),j=n.n(k),C=n(44),T=n.n(C),N=n(31),U=n.n(N),I=n(122),A=n.n(I),R=n(57),M=n.n(R),W=Object(g.withStyles)(function(e){return{paper:{paddingBottom:2*e.spacing.unit,width:"100%",maxWidth:700,margin:"0 auto",textAlign:"center"},headingText:{backgroundColor:e.palette.primary.dark,padding:"20px 0",color:e.palette.getContrastText(e.palette.secondary.dark),marginBottom:e.spacing.unit}}})(function(e){var t=e.classes,n=[{name:"React",url:"https://reactjs.org/"},{name:"Redux and React-Redux",url:"https://react-redux.js.org/"},{name:"React-Router",url:"https://reacttraining.com/react-router/"},{name:"Axios",url:"https://github.com/axios/axios"},{name:"Lodash (on one specific situation)",url:"https://lodash.com/"},{name:"Material-UI",url:"https://material-ui.com/"}].map(function(e,t){return r.a.createElement(j.a,{key:t},r.a.createElement(T.a,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.url},r.a.createElement(A.a,{color:"primary"}))),r.a.createElement(U.a,null,e.name))});return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement(x.a,{className:t.headingText,variant:"h5"},"Wellcome to my little Chat App!"),r.a.createElement(S.a,{disablePadding:!0},r.a.createElement(x.a,{variant:"subtitle1"},"This app was built by me (Szabolcs Forreiter) using the following technologies:"),n),r.a.createElement(M.a,{variant:"extended",color:"secondary",component:b.a,to:"/users"},"Start Testing the app"))}),D=n(23),_=n(24),B=n(26),L=n(25),F=n(27),G=n(32),P=n.n(G),V=n(48),z=n(123),q=n.n(z).a.create({baseURL:"http://assignment.bunq.com/"}),J=function(e,t){return function(){var n=Object(V.a)(P.a.mark(function n(a){var r;return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.get("/conversation/".concat(e,"/new/").concat(t));case 2:r=n.sent,a({type:"GET_COMMENTS",payload:r.data});case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},X=n(124),$=n.n(X),H=n(58),K=n.n(H),Q=function(e){function t(){var e,n;Object(D.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).onUserSelect=function(e){n.props.selectUser(e)},n}return Object(F.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props.users.map(function(n){return r.a.createElement(b.a,{className:t.link,to:"/conversations",onClick:function(){return e.onUserSelect(n)},key:n.id},r.a.createElement(j.a,{button:!0,divider:!0},r.a.createElement(T.a,null,r.a.createElement($.a,{color:"primary",fontSize:"large"})),r.a.createElement(U.a,null,n.name)))});return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement(x.a,{className:t.headingText,variant:"h5"},"Select a test account:"),r.a.createElement(S.a,{disablePadding:!0},0===this.props.users.length?r.a.createElement(K.a,{className:t.progress}):n))}}]),t}(r.a.Component),Y=Object(l.b)(function(e){return{users:e.users}},{getUsers:function(){return function(){var e=Object(V.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.get("/users");case 2:n=e.sent,t({type:"GET_USERS",payload:n.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},selectUser:function(e){return{type:"SELECT_USER",payload:e}}})(Object(g.withStyles)(function(e){return{paper:{width:"100%",maxWidth:700,margin:"0 auto",textAlign:"center",marginBottom:e.spacing.unit},headingText:{backgroundColor:e.palette.primary.dark,padding:"5px 0",color:e.palette.getContrastText(e.palette.primary.dark)},link:{textDecoration:"none"},progress:{margin:2*e.spacing.unit}}})(Q)),Z=n(125),ee=n.n(Z),te=function(e){function t(){var e,n;Object(D.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).onConversationSelect=function(e){n.props.selectConversation(e)},n}return Object(F.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.getConversations(this.props.user.id)}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props.conversations.map(function(n,a){var o="/conversations/".concat(n.conversation.conversationId);return r.a.createElement(b.a,{className:t.link,to:o,onClick:function(){return e.onConversationSelect(n)},key:a},r.a.createElement(j.a,{button:!0,divider:!0},r.a.createElement(T.a,null,r.a.createElement(ee.a,{color:"primary",fontSize:"large"})),r.a.createElement(U.a,null,n.conversation.name?n.conversation.name:"undefined")))});return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement(x.a,{className:t.headingText,variant:"h5"},"Select a Conversation:"),r.a.createElement(S.a,{disablePadding:!0},0===this.props.conversations.length?r.a.createElement(K.a,{className:t.progress}):n))}}]),t}(r.a.Component),ne=Object(l.b)(function(e){return{user:e.selectedUser,conversations:e.conversations,selectedConversation:e.selectedConversation}},{getConversations:function(e){return function(){var t=Object(V.a)(P.a.mark(function t(n){var a;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.get("/conversation/user/".concat(e));case 2:a=t.sent,n({type:"GET_CONVERSATIONS",payload:a.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},selectConversation:function(e){return{type:"SELECT_CONVERSATION",payload:e}}})(Object(g.withStyles)(function(e){return{paper:{width:"100%",maxWidth:700,margin:"0 auto",textAlign:"center",marginBottom:e.spacing.unit},headingText:{backgroundColor:e.palette.primary.dark,padding:"5px 0",color:e.palette.getContrastText(e.palette.primary.dark)},link:{textDecoration:"none"},progress:{margin:2*e.spacing.unit}}})(te)),ae=function(e){function t(){return Object(D.a)(this,t),Object(B.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.user,o=e.classes,i=e.selectedUser;return t.senderId===i.id?r.a.createElement(j.a,{dense:!0,divider:!0,className:o.listItemUser},r.a.createElement(U.a,null,r.a.createElement(x.a,{variant:"body1",className:o.messageTextUser},t.message))):r.a.createElement(j.a,{dense:!0,divider:!0,className:o.listItem},r.a.createElement(U.a,{primary:r.a.createElement(x.a,{variant:"body1",className:o.messageText},t.message),secondary:r.a.createElement(a.Fragment,null,r.a.createElement(x.a,{component:"span",className:o.inline,color:"textPrimary"},n[0].name+" - "),new Date(t.timestamp).toLocaleString())}))}}]),t}(a.Component),re=Object(g.withStyles)(function(e){return{listItem:{width:"auto",background:"linear-gradient(45deg, #fff 50%, #7986cb 95%)",borderRadius:"30px",padding:"16px",margin:"12px 8px"},listItemUser:{width:"auto",background:"linear-gradient(45deg, #7986cb 30%, #303f9f 70%)",textAlign:"end",borderRadius:"30px",padding:"16px",margin:"12px 8px"},inline:{display:"inline",color:e.palette.primary.dark},messageText:{color:"black",fontSize:"1.2rem"},messageTextUser:{color:"white",fontSize:"1.2rem"}}})(ae),oe=function(e){function t(){var e,n;Object(D.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).intervalID=0,n.scrollToBottom=function(){n.el&&n.el.scrollIntoView({behavior:"smooth"})},n}return Object(F.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getComments(this.props.conversation.conversationId,1),this.intervalID=setInterval(function(){return e.props.getComments(e.props.conversation.conversationId,1)},2e3),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props,n=t.comments,a=t.users,o=t.selectedUser,i=n.map(function(e){var t=a.filter(function(t){return t.id===e.senderId});return r.a.createElement(re,{key:e.id,user:t,comment:e,selectedUser:o})});return 0===this.props.comments.length?r.a.createElement("div",null,"Be the first to comment!"):r.a.createElement(S.a,{disablePadding:!0},i,r.a.createElement("div",{ref:function(t){e.el=t}}))}}]),t}(r.a.Component),ie=Object(l.b)(function(e){return{selectedUser:e.selectedUser,comments:e.comments,users:e.users,conversation:e.selectedConversation.conversation}},{getComments:J})(oe),ce=n(127),se=n.n(ce),le=n(126),ue=n.n(le),me=function(e){function t(){var e,n;Object(D.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={comment:""},n.onFormSubmit=function(e){e.preventDefault();var t={message:n.state.comment,senderId:n.props.senderId};n.props.sendMessage(n.props.conversationId,t),n.setState({comment:""})},n}return Object(F.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:this.onFormSubmit},r.a.createElement(ue.a,{id:"comment",label:"Comment",className:t.textField,margin:"normal",value:this.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),r.a.createElement(M.a,{color:"secondary",type:"submit",size:"large","aria-label":"Send",disabled:!this.state.comment},r.a.createElement(se.a,null)))}}]),t}(r.a.Component),pe=Object(l.b)(function(e){return{senderId:e.selectedUser.id,conversationId:e.selectedConversation.conversation.conversationId}},{sendMessage:function(e,t){return function(){var n=Object(V.a)(P.a.mark(function n(a){var r;return P.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.post("/conversation/".concat(e,"/message/send"),t);case 2:r=n.sent,a({type:"SEND_MESSAGE",payload:r.data});case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},getComments:J})(Object(g.withStyles)(function(e){return{container:{display:"flex",flexWrap:"nowrap",justifyContent:"space-evenly",alignItems:"center"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"72%",color:"#fff"}}})(me)),de=Object(g.withStyles)(function(e){return{paper:{background:e.palette.primary.light,marginBottom:e.spacing.unit,maxWidth:700,margin:"20px auto"},comments:{width:"100%",height:"70vh",overflow:"scroll",overflowX:"hidden",background:e.palette.primary.light},inputField:{width:"100%",maxWidth:700,marginTop:20,background:e.palette.primary.main}}})(function(e){var t=e.classes;return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement("section",{className:t.comments},r.a.createElement(ie,null)),r.a.createElement("section",{className:t.inputField},r.a.createElement(pe,null)))}),he=Object(g.createMuiTheme)({typography:{useNextVariants:!0}}),fe=Object(l.b)(function(e){return{isUserSelected:!v.a.isEmpty(e.selectedUser)}})(function(e){var t=e.isUserSelected;return r.a.createElement(p.a,null,r.a.createElement(g.MuiThemeProvider,{theme:he},r.a.createElement(d.a,{path:"/",exact:!0,component:W}),r.a.createElement(d.a,{path:"/users",exact:!0,component:Y}),r.a.createElement(d.a,{path:"/conversations",exact:!0,render:function(){return t?r.a.createElement(ne,null):r.a.createElement(h.a,{to:"/"})}}),r.a.createElement(d.a,{path:"/conversations/:id",exact:!0,render:function(){return t?r.a.createElement(de,null):r.a.createElement(h.a,{to:"/"})}})))}),ve=Object(u.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return t.payload;default:return e}},selectedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_USER":return t.payload;default:return e}},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CONVERSATIONS":return t.payload;default:return e}},selectedConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_CONVERSATION":return t.payload;default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COMMENTS":return t.payload;default:return e}},lastMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return t.payload;default:return e}}}),ge=Object(u.d)(ve,Object(u.a)(m.a));i.a.render(r.a.createElement(l.a,{store:ge},r.a.createElement(fe,null)),document.querySelector("#root")),function(e){if("serviceWorker"in navigator){if(new URL("/bunq",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/bunq","/service-worker.js");c?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):s(t,e)})}}()}},[[128,2,1]]]);
//# sourceMappingURL=main.2c483bec.chunk.js.map