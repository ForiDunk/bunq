(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,n){e.exports=n(312)},137:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),s=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(21),i=n(36),l=n(120),u=(n(137),n(314)),m=n(315),p=n(316),d=n(121),h=n.n(d),v=n(17),g=n(313),f=n(28),E=n.n(f),b=n(22),y=n.n(b),x=n(29),O=n.n(x),w=n(30),S=n.n(w),j=n(44),k=n.n(j),C=n(31),T=n.n(C),N=n(122),U=n.n(N),I=n(57),R=n.n(I),A=Object(v.withStyles)(function(e){return{paper:{paddingBottom:2*e.spacing.unit,width:"100%",maxWidth:700,margin:"0 auto",textAlign:"center"},headingText:{backgroundColor:e.palette.primary.dark,padding:"20px 0",color:e.palette.getContrastText(e.palette.secondary.dark),marginBottom:e.spacing.unit}}})(function(e){var t=e.classes,n=[{name:"React",url:"https://reactjs.org/"},{name:"Redux and React-Redux",url:"https://react-redux.js.org/"},{name:"React-Router",url:"https://reacttraining.com/react-router/"},{name:"Axios",url:"https://github.com/axios/axios"},{name:"Lodash (on one specific situation)",url:"https://lodash.com/"},{name:"Material-UI",url:"https://material-ui.com/"}].map(function(e,t){return r.a.createElement(S.a,{key:t},r.a.createElement(k.a,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.url,"aria-label":e.name},r.a.createElement(U.a,{color:"primary"}))),r.a.createElement(T.a,null,e.name))});return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement(y.a,{className:t.headingText,variant:"h5"},"Wellcome to my little Chat App!"),r.a.createElement(y.a,{variant:"subtitle1"},"This app was built by me (Szabolcs Forreiter) using the following technologies:"),r.a.createElement(O.a,{disablePadding:!0},n),r.a.createElement(R.a,{variant:"extended",color:"primary",component:g.a,to:"/users"},"Start Testing the app"))}),M=n(23),D=n(24),_=n(26),B=n(25),W=n(27),F=n(32),G=n.n(F),L=n(48),V=n(123),z=n.n(V).a.create({baseURL:"http://assignment.bunq.com/"}),P=function(e,t){return function(){var n=Object(L.a)(G.a.mark(function n(a){var r;return G.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.get("/conversation/".concat(e,"/new/").concat(t));case 2:r=n.sent,a({type:"GET_COMMENTS",payload:r.data});case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},q=n(124),J=n.n(q),X=n(58),$=n.n(X),H=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).onUserSelect=function(e){n.props.selectUser(e)},n}return Object(W.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props.users.map(function(n){return r.a.createElement(g.a,{className:t.link,to:"/conversations",onClick:function(){return e.onUserSelect(n)},key:n.id},r.a.createElement(S.a,{button:!0,divider:!0},r.a.createElement(k.a,null,r.a.createElement(J.a,{color:"primary",fontSize:"large"})),r.a.createElement(T.a,null,n.name)))});return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement(y.a,{className:t.headingText,variant:"h5"},"Select a test account:"),r.a.createElement(O.a,{disablePadding:!0},0===this.props.users.length?r.a.createElement($.a,{className:t.progress}):n))}}]),t}(r.a.Component),K=Object(c.b)(function(e){return{users:e.users}},{getUsers:function(){return function(){var e=Object(L.a)(G.a.mark(function e(t){var n;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("/users");case 2:n=e.sent,t({type:"GET_USERS",payload:n.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},selectUser:function(e){return{type:"SELECT_USER",payload:e}}})(Object(v.withStyles)(function(e){return{paper:{width:"100%",maxWidth:700,margin:"0 auto",textAlign:"center",marginBottom:e.spacing.unit},headingText:{backgroundColor:e.palette.primary.dark,padding:"5px 0",color:e.palette.getContrastText(e.palette.primary.dark)},link:{textDecoration:"none"},progress:{margin:2*e.spacing.unit}}})(H)),Q=n(125),Y=n.n(Q),Z=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).onConversationSelect=function(e){n.props.selectConversation(e)},n}return Object(W.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.getConversations(this.props.user.id)}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.props.conversations.map(function(n,a){var o="/conversations/".concat(n.conversation.conversationId);return r.a.createElement(g.a,{className:t.link,to:o,onClick:function(){return e.onConversationSelect(n)},key:a},r.a.createElement(S.a,{button:!0,divider:!0},r.a.createElement(k.a,null,r.a.createElement(Y.a,{color:"primary",fontSize:"large"})),r.a.createElement(T.a,null,n.conversation.name?n.conversation.name:"undefined")))});return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement(y.a,{className:t.headingText,variant:"h5"},"Select a Conversation:"),r.a.createElement(O.a,{disablePadding:!0},0===this.props.conversations.length?r.a.createElement($.a,{className:t.progress}):n))}}]),t}(r.a.Component),ee=Object(c.b)(function(e){return{user:e.selectedUser,conversations:e.conversations,selectedConversation:e.selectedConversation}},{getConversations:function(e){return function(){var t=Object(L.a)(G.a.mark(function t(n){var a;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.get("/conversation/user/".concat(e));case 2:a=t.sent,n({type:"GET_CONVERSATIONS",payload:a.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},selectConversation:function(e){return{type:"SELECT_CONVERSATION",payload:e}}})(Object(v.withStyles)(function(e){return{paper:{width:"100%",maxWidth:700,margin:"0 auto",textAlign:"center",marginBottom:e.spacing.unit},headingText:{backgroundColor:e.palette.primary.dark,padding:"5px 0",color:e.palette.getContrastText(e.palette.primary.dark)},link:{textDecoration:"none"},progress:{margin:2*e.spacing.unit}}})(Z)),te=function(e){function t(){return Object(M.a)(this,t),Object(_.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.user,o=e.classes,s=e.selectedUser;return t.senderId===s.id?r.a.createElement(S.a,{dense:!0,divider:!0,className:o.listItemUser},r.a.createElement(T.a,null,r.a.createElement(y.a,{variant:"body1",className:o.messageTextUser},t.message))):r.a.createElement(S.a,{dense:!0,divider:!0,className:o.listItem},r.a.createElement(T.a,{primary:r.a.createElement(y.a,{variant:"body1",className:o.messageText},t.message),secondary:r.a.createElement(a.Fragment,null,r.a.createElement(y.a,{component:"span",className:o.inline,color:"textPrimary"},n[0].name+" - "),new Date(t.timestamp).toLocaleString())}))}}]),t}(a.Component),ne=Object(v.withStyles)(function(e){return{listItem:{width:"auto",background:"linear-gradient(45deg, #fff 50%, #7986cb 95%)",borderRadius:"30px",padding:"16px",margin:"12px 8px"},listItemUser:{width:"auto",background:"linear-gradient(45deg, #7986cb 30%, #303f9f 70%)",textAlign:"end",borderRadius:"30px",padding:"16px",margin:"12px 8px"},inline:{display:"inline",color:e.palette.primary.dark},messageText:{color:"black",fontSize:"1.2rem"},messageTextUser:{color:"white",fontSize:"1.2rem"}}})(te),ae=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).intervalID=0,n.scrollToBottom=function(){n.el&&n.el.scrollIntoView({behavior:"smooth"})},n}return Object(W.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getComments(this.props.conversation.conversationId,1),this.intervalID=setInterval(function(){return e.props.getComments(e.props.conversation.conversationId,1)},2e3),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.props,n=t.comments,a=t.users,o=t.selectedUser,s=n.map(function(e){var t=a.filter(function(t){return t.id===e.senderId});return r.a.createElement(ne,{key:e.id,user:t,comment:e,selectedUser:o})});return 0===this.props.comments.length?r.a.createElement("div",null,"Be the first to comment!"):r.a.createElement(O.a,{disablePadding:!0},s,r.a.createElement("div",{ref:function(t){e.el=t}}))}}]),t}(r.a.Component),re=Object(c.b)(function(e){return{selectedUser:e.selectedUser,comments:e.comments,users:e.users,conversation:e.selectedConversation.conversation}},{getComments:P})(ae),oe=n(127),se=n.n(oe),ce=n(126),ie=n.n(ce),le=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={comment:""},n.onFormSubmit=function(e){e.preventDefault();var t={message:n.state.comment,senderId:n.props.senderId};n.props.sendMessage(n.props.conversationId,t),n.setState({comment:""})},n}return Object(W.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off",onSubmit:this.onFormSubmit},r.a.createElement(ie.a,{id:"comment",label:"Comment",className:t.textField,margin:"normal",value:this.state.comment,onChange:function(t){return e.setState({comment:t.target.value})}}),r.a.createElement(R.a,{color:"secondary",type:"submit",size:"large","aria-label":"Send",disabled:!this.state.comment},r.a.createElement(se.a,null)))}}]),t}(r.a.Component),ue=Object(c.b)(function(e){return{senderId:e.selectedUser.id,conversationId:e.selectedConversation.conversation.conversationId}},{sendMessage:function(e,t){return function(){var n=Object(L.a)(G.a.mark(function n(a){var r;return G.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.post("/conversation/".concat(e,"/message/send"),t);case 2:r=n.sent,a({type:"SEND_MESSAGE",payload:r.data});case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},getComments:P})(Object(v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"nowrap",justifyContent:"space-evenly",alignItems:"center"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"72%",color:"#fff"}}})(le)),me=Object(v.withStyles)(function(e){return{paper:{background:e.palette.primary.light,marginBottom:e.spacing.unit,maxWidth:700,margin:"20px auto"},comments:{width:"100%",height:"70vh",overflow:"scroll",overflowX:"hidden",background:e.palette.primary.light},inputField:{width:"100%",maxWidth:700,marginTop:20,background:e.palette.primary.main}}})(function(e){var t=e.classes;return r.a.createElement(E.a,{className:t.paper,elevation:1},r.a.createElement("section",{className:t.comments},r.a.createElement(re,null)),r.a.createElement("section",{className:t.inputField},r.a.createElement(ue,null)))}),pe=Object(v.createMuiTheme)({typography:{useNextVariants:!0}}),de=Object(c.b)(function(e){return{isUserSelected:!h.a.isEmpty(e.selectedUser)}})(function(e){var t=e.isUserSelected;return r.a.createElement(u.a,null,r.a.createElement(v.MuiThemeProvider,{theme:pe},r.a.createElement(m.a,{path:"/",exact:!0,component:A}),r.a.createElement(m.a,{path:"/users",exact:!0,component:K}),r.a.createElement(m.a,{path:"/conversations",exact:!0,render:function(){return t?r.a.createElement(ee,null):r.a.createElement(p.a,{to:"/"})}}),r.a.createElement(m.a,{path:"/conversations/:id",exact:!0,render:function(){return t?r.a.createElement(me,null):r.a.createElement(p.a,{to:"/"})}})))}),he=Object(i.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return t.payload;default:return e}},selectedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_USER":return t.payload;default:return e}},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CONVERSATIONS":return t.payload;default:return e}},selectedConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_CONVERSATION":return t.payload;default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COMMENTS":return t.payload;default:return e}},lastMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return t.payload;default:return e}}}),ve=Object(i.d)(he,Object(i.a)(l.a));s.a.render(r.a.createElement(c.a,{store:ve},r.a.createElement(de,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[128,2,1]]]);
//# sourceMappingURL=main.748bd092.chunk.js.map